<template>
  <div id="register" class="flex-col">
    <form class="flex-col text-xl mt-24">
      <div id="LoginText" class="flex items-center mb-16">
        <p class="mr-4">Already have an account?</p>
        <router-link to="/login">
          <button
            class="border-2 border-main hover:border-alternative hover:text-alternative text-xl rounded py-2 px-4"
          >
            Login
          </button>
        </router-link>
      </div>
      <label for="email">Email</label>
      <input
        type="email"
        v-model="email"
        @change="checkInputs"
        class="rounded border-2 mt-2"
      />
      <label for="password" class="mt-6">Password</label>
      <input
        type="password"
        v-model="password"
        @change="checkInputs"
        class="rounded border-2 mt-2"
      />
    </form>
    <button
      class="bg-focus hover:bg-main text-white text-xl px-4 py-2 rounded mt-8"
      @click="sendRegister"
    >
      Register
    </button>
    <p id="warnMessage" class="text-xl text-focus mt-4">{{ warnText }}</p>
    <div class="banner mt-12 md:flex items-start">
      <div class="box w-40 mx-6 flex-col text-center">
        <svg
          class="w-16"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            d="M459.669 82.906l-196-81.377a19.999 19.999 0 00-15.338 0l-196 81.377A20 20 0 0040 101.377v98.925c0 136.213 82.329 258.74 208.442 310.215a20.004 20.004 0 0015.116 0C389.669 459.043 472 336.516 472 200.302v-98.925a20 20 0 00-12.331-18.471zM432 200.302c0 115.795-68 222.392-176 269.974C150.886 423.965 80 319.235 80 200.302v-85.573l176-73.074 176 73.074zm-198.106 67.414l85.964-85.963c7.81-7.81 20.473-7.811 28.284 0s7.81 20.474-.001 28.284L248.036 310.142c-7.812 7.812-20.475 7.809-28.284 0l-55.894-55.894c-7.811-7.811-7.811-20.474 0-28.284s20.474-7.811 28.284 0z"
          />
        </svg>
        <h6 class="text-xl mt-4">Secure</h6>
        <p class="text-sm text-alternative">
          We keep your information safe and secure.
        </p>
      </div>
      <div class="box w-40 mx-6 mt-4 md:mt-0 flex-col text-center">
        <svg
          class="w-16"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512.002 512.002"
        >
          <path
            d="M511.257 197.652l-24.394-134.93c-3.442-19.04-18.546-34.144-37.584-37.585L314.347.743a46.65 46.65 0 00-41.259 12.912L13.631 273.109c-18.175 18.178-18.175 47.755.001 65.934l159.323 159.324c9.09 9.089 21.028 13.633 32.968 13.633 11.939 0 23.878-4.544 32.967-13.633l259.455-259.453a46.628 46.628 0 0012.912-41.262zm-34.145 20.029L217.658 477.135c-6.472 6.471-16.999 6.471-23.469 0L34.866 317.81c-6.471-6.471-6.471-16.998-.001-23.469L294.319 34.887a16.606 16.606 0 0114.688-4.596l134.931 24.395c6.776 1.224 12.152 6.601 13.377 13.378l24.394 134.929a16.6 16.6 0 01-4.597 14.688z"
          />
          <path
            d="M417.967 93.618c-16.025-16.027-42.101-16.026-58.126 0-16.027 16.026-16.027 42.101 0 58.127 8.012 8.013 18.537 12.02 29.063 12.02s21.05-4.007 29.062-12.019c7.764-7.764 12.039-18.085 12.039-29.064.001-10.979-4.274-21.301-12.038-29.064zm-21.232 36.893v.001c-4.317 4.318-11.342 4.32-15.661 0-4.318-4.318-4.318-11.344 0-15.662a11.04 11.04 0 017.83-3.238c2.837 0 5.672 1.081 7.831 3.239a11 11 0 013.244 7.83 11 11 0 01-3.244 7.83zM190.953 381.55l-23.198-23.198 13.577-13.577c1.378-1.378 1.887-2.967 1.527-4.765-.359-1.799-1.227-3.386-2.607-4.766-1.497-1.497-3.163-2.412-4.99-2.742-1.829-.33-3.403.165-4.72 1.482l-13.577 13.577-15.197-15.197 23.289-23.289c1.318-1.318 1.754-2.951 1.304-4.899-.449-1.947-1.543-3.791-3.282-5.53-1.618-1.619-3.386-2.667-5.306-3.148-1.917-.477-3.565-.029-4.943 1.349l-31.201 31.201c-1.679 1.68-2.743 3.493-3.192 5.441-.45 1.95.015 3.611 1.393 4.99l57.097 57.097c1.381 1.381 3.133 1.755 5.261 1.127 2.127-.629 4.149-1.903 6.068-3.823 1.918-1.919 3.192-3.94 3.821-6.068.63-2.128.257-3.881-1.124-5.262zM266.395 301.254c-.659-.659-1.347-1.049-2.068-1.169l-30.841-8.903c4.435-10.068 1.979-19.781-7.373-29.132-12.827-12.827-26.616-11.868-41.362 2.878l-18.614 18.614c-1.259 1.258-1.873 2.71-1.843 4.36.03 1.65.615 3.043 1.753 4.181l57.187 57.187c1.381 1.381 3.132 1.756 5.26 1.125 2.128-.629 4.15-1.903 6.068-3.821 1.918-1.918 3.192-3.939 3.823-6.068.629-2.128.255-3.88-1.126-5.261l-21.669-21.669 5.935-5.935 36.237 11.599c2.638.84 5.005.211 7.103-1.888 2.098-2.098 3.313-4.871 3.641-8.32.333-3.447-.373-6.039-2.111-7.778zm-52.69-7.374l-8.903 8.903-16.724-16.724 8.903-8.903c2.637-2.637 5.29-4 7.958-4.09 2.667-.089 5.499 1.362 8.496 4.359 2.999 2.999 4.451 5.831 4.361 8.498-.091 2.668-1.454 5.319-4.091 7.957zM319.533 258.004c-.479-1.918-1.528-3.686-3.147-5.305-1.738-1.738-3.581-2.831-5.53-3.282-1.949-.447-3.583-.013-4.9 1.304l-24.098 24.098-15.285-15.285 13.488-13.488c1.378-1.378 1.888-2.968 1.528-4.766-.359-1.799-1.227-3.386-2.607-4.766-1.497-1.497-3.163-2.412-4.99-2.742-1.83-.329-3.404.166-4.721 1.483l-13.488 13.488-15.197-15.197 24.098-24.098c1.318-1.318 1.754-2.951 1.305-4.9-.449-1.947-1.543-3.791-3.282-5.53-1.618-1.62-3.386-2.667-5.306-3.148-1.917-.477-3.566-.028-4.944 1.35l-32.01 32.01c-1.677 1.679-2.742 3.492-3.191 5.44-.45 1.95.015 3.611 1.393 4.99l57.097 57.097c1.381 1.381 3.042 1.846 4.989 1.394 1.949-.448 3.76-1.513 5.439-3.192l32.01-32.01c1.378-1.378 1.829-3.025 1.349-4.945zM367.997 209.54c-.479-1.918-1.528-3.686-3.147-5.305-1.738-1.738-3.581-2.831-5.53-3.282-1.949-.447-3.582-.014-4.9 1.304l-24.097 24.097-15.285-15.285 13.487-13.487c1.378-1.378 1.888-2.968 1.528-4.766-.359-1.799-1.227-3.386-2.607-4.766-1.497-1.497-3.163-2.412-4.99-2.741-1.83-.329-3.403.165-4.721 1.483l-13.487 13.487-15.197-15.197 24.097-24.097c1.319-1.319 1.754-2.951 1.305-4.9-.449-1.947-1.543-3.791-3.282-5.53-1.618-1.62-3.386-2.667-5.306-3.148-1.917-.477-3.566-.028-4.944 1.35l-32.01 32.01c-1.677 1.678-2.742 3.492-3.191 5.44-.45 1.95.015 3.611 1.393 4.99l57.097 57.097c1.381 1.381 3.042 1.846 4.989 1.394 1.949-.448 3.76-1.513 5.439-3.192l32.01-32.01c1.378-1.378 1.829-3.026 1.349-4.946z"
          />
        </svg>
        <h6 class="text-xl mt-4">100% Free</h6>
        <p class="text-sm text-alternative">
          This app has no hidden cost, we promise.
        </p>
      </div>
      <div class="box w-40 mx-6 mt-4 md:mt-0 flex-col text-center">
        <svg
          class="w-16"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            d="M256 0C114.844 0 0 114.844 0 256s114.844 256 256 256 256-114.844 256-256S397.156 0 256 0zm0 448c-105.865 0-192-86.135-192-192 0-40.406 12.25-78.604 35.542-111.198l267.656 267.656C334.604 435.75 296.406 448 256 448zm156.458-80.802L144.802 99.542C177.396 76.25 215.594 64 256 64c105.865 0 192 86.135 192 192 0 40.406-12.25 78.604-35.542 111.198z"
          />
        </svg>
        <h6 class="text-xl mt-4">No data selling</h6>
        <p class="text-sm text-alternative">
          This app is 100% non-profit, your data is safely stored and not
          touched by anybody.
        </p>
      </div>
    </div>
  </div>
</template>
<script>
import data_functions from "../data/data_functions";
import store from "../store";
export default {
  metaInfo: {
      title: 'Register',
    },
  data() {
    return {
      email: "",
      password: "",
      warnText: null,
    };
  },
  computed: {},
  methods: {
    checkInputs() {
      if (
        this.email.includes("@") &&
        this.email.includes(".") &&
        this.email.length > 5
      ) {
        if (this.password.length > 7 || this.password == "") {
          this.warnText = "";
        } else {
          this.warnText = "Please enter a more secure password.";
        }
      } else {
        this.warnText = "Please enter a valid email.";
      }
    },
    sendRegister() {
      this.checkInputs();
      if (this.warnText == "") {
        data_functions
          .create_user({
            email: this.email,
            password: this.password,
          })
          .then((response) => {
            if (response.data == "User already exists") {
              this.warnText =
                "There is already a user registered for this email adress. Try logging in.";
            } else if (response.data == "User created") {
              store.commit("setUser", { email: this.email });
              this.$router.push({ path: "app" });
            }
          });
      }
    },
  },
};
</script>